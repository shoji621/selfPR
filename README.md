# ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦
## selfPRã¨ã¯
ã€ŒselfPRã€ã¨ã¯ã€è‡ªå·±PRã‚’æŠ•ç¨¿ã—ã€ãã®å†…å®¹ã«å¯¾ã—ã¦æ·»å‰Šã‚’ã—ã¦ã‚‚ã‚‰ã†ã“ã¨ãŒã§ãã‚‹ã‚¢ãƒ—ãƒªã§ã™ã€‚

## æ¦‚è¦
ã‚¢ãƒ—ãƒªåï¼šselfPR

URLï¼šhttps://selfpr.herokuapp.com/

ä½¿ç”¨è¨€èªï¼šRuby on Railsã€jQuery

ä¸»ãªæ©Ÿèƒ½ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã€è‡ªå·±PRæŠ•ç¨¿ã€ã‚³ãƒ¡ãƒ³ãƒˆã€ã„ã„ã­ã€ãƒ•ã‚©ãƒ­ãƒ¼ã€è©³ç´°æ¤œç´¢

ä½œæ¥­äººæ•°ï¼š1äºº

ä½œæ¥­æ—¥æ•°ï¼š18æ—¥é–“

## ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†ã¨æ€ã£ãŸãã£ã‹ã‘
2ç‚¹ã‚ã‚Šã¾ã™ã€‚

- ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚¯ãƒ¼ãƒ«ã®ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸæŠ•ç¨¿ç³»ã‚¢ãƒ—ãƒªã®ä½œæˆã‚’ã™ã‚‹ã“ã¨ã§ã€Railsã®çŸ¥è­˜å®šç€ã‚’å›³ã‚Šã¾ã—ãŸã€‚
- è‡ªå·±PRã®æ·»å‰Šã‚’å—ã‘ãŸã„ãŒã€ãã‚Œã‚’é ¼ã‚ã‚‹ç’°å¢ƒãŒãªã„äººã§ã‚‚ã€æ·»å‰Šã‚’å—ã‘ã‚‰ã‚Œã‚‹ç’°å¢ƒã‚’ç”¨æ„ã—ãŸã‹ã£ãŸãŸã‚ã§ã™ã€‚

## Usage

```
$ git clone https://github.com/shoji621/selfPR.git
$ cd idea_space
$ bundle install
$ rails db:create
$ rails db:migrate
$ rails s
ğŸ‘‰http://localhost:3000/
```

## å…·ä½“çš„ãªæ©Ÿèƒ½ç´¹ä»‹
#### ãƒ» ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ² 
```
deviseã‚’ç”¨ã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ©Ÿèƒ½ã®å®Ÿè£…ã‚’è¡Œã£ãŸã€‚
ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«é·ç§»ã•ã‚Œã‚‹ã€‚
```
<img src="https://user-images.githubusercontent.com/57927432/72968978-fa1b2e80-3e07-11ea-843b-8db46ad1f722.png" width="500px">

#### ãƒ» è‡ªå·±PRæŠ•ç¨¿

```
ãƒ˜ãƒƒãƒ€ãƒ¼å³ä¸Šã®ã€Œæ–°è¦æŠ•ç¨¿ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨è‡ªå·±PRã‚’æŠ•ç¨¿ã§ãã‚‹ãƒšãƒ¼ã‚¸ã«é·ç§»ã—ã¾ã™ã€‚
å¿—æœ›æ¥­ç•Œ
å¿—æœ›è·ç¨®
ç¾è·
è‡ªå·±PRæœ¬æ–‡

ã‚’å…¨ã¦è¨˜å…¥ã—ã€ã€ŒæŠ•ç¨¿ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨æŠ•ç¨¿ãŒã§ãã¾ã™ã€‚
```

<img src="https://user-images.githubusercontent.com/57927432/72970299-b118a980-3e0a-11ea-8606-4c5cc97a11df.png" width="500px">

#### ãƒ» ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿

```
è‡ªå·±PRãŒã€Œå—ä»˜ä¸­ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã‚‚ã®ã«å¯¾ã—ã¦ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«è‡ªå·±PRã®æ·»å‰Šå†…å®¹ã‚’è¨˜å…¥ã—ã¦ä¸‹ã•ã„ã€‚
```

<img src="https://user-images.githubusercontent.com/57927432/72970997-20db6400-3e0c-11ea-8e54-7b465e078cb8.png" width="500px">

#### ãƒ» è§£æ±ºæ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
```
æ·»å‰Šã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚‚ã‚‰ã„ã€è‡ªåˆ†ã®ç´å¾—ã®ã„ãè‡ªå·±PRã«ç·¨é›†ã™ã‚‹ã“ã¨ãŒã§ããŸã‚‰ã€ã€Œè§£æ±ºæ¸ˆã€ã«ã—ã¦ã‚³ãƒ¡ãƒ³ãƒˆã®å—ä»˜ã‚’çµ‚äº†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
å³ä¸‹ã®ã€Œè§£æ±ºæ¸ˆã¿ã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€Œå—ä»˜ä¸­ã€ã‹ã‚‰ã€Œè§£æ±ºæ¸ˆã€ã«å¤‰åŒ–ã—ã€ã‚³ãƒ¡ãƒ³ãƒˆãŒã§ããªããªã‚Šã¾ã™ã€‚
```

<img src="https://user-images.githubusercontent.com/57927432/72971306-cbec1d80-3e0c-11ea-93ca-33715069ecee.png" width="500px"> <img src="https://user-images.githubusercontent.com/57927432/72971363-e3c3a180-3e0c-11ea-8f30-3beaf21bf2b5.png" width="500px">

#### ãƒ» ã„ã„ã­

```
ãƒãƒ¼ãƒˆãƒãƒ¼ã‚¯ã‚’æŠ¼ã™ã¨ã€Œã„ã„ã­ã€ã®å‡¦ç†ãŒã•ã‚Œã¾ã™ã€‚
ã„ã„ã­ã—ãŸè‡ªå·±PRã®ä¸€è¦§ã¯

ã€€å³ä¸Šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã‚’ã‚¯ãƒªãƒƒã‚¯
ï¼ã€ŒãŠæ°—ã«å…¥ã‚ŠæŠ•ç¨¿ä¸€è¦§ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
ã™ã‚‹ã¨ç¢ºèªã§ãã¾ã™ã€‚
```

<img src="https://user-images.githubusercontent.com/57927432/73044751-5afd4200-3eae-11ea-999f-1312419e546e.png" width="500px">

#### ãƒ» ãƒ•ã‚©ãƒ­ãƒ¼

```
è‡ªåˆ†ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ•ç¨¿ä¸€è¦§ãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãã“ã§ã€å³ä¸Šã«ã‚ã‚‹ã€Œãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªåˆ†ã®ãƒ•ã‚©ãƒ­ãƒ¼ä¸€è¦§ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚
å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œãƒ•ã‚©ãƒ­ãƒ¼ã€ã€Œãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã€ã®ä¸€è¦§ã‚’ç¢ºèªã—ãŸã„æ™‚ã¯ã€å·¦ä¸Šã«ã‚ã‚‹ã€Œãƒ•ã‚©ãƒ­ãƒ¼ã€ã€Œãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ã€ã®æ–‡å­—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¸‹ã•ã„ã€‚
```

<img src="https://user-images.githubusercontent.com/57927432/73044789-a152a100-3eae-11ea-8613-1c75d24ce9df.png" width="500px"> <img src="https://user-images.githubusercontent.com/57927432/73045017-892f5180-3eaf-11ea-972d-df05ba8e918e.png" width="500px">

#### ãƒ» è©³ç´°æ¤œç´¢

```
ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œè©³ç´°æ¤œç´¢ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€è©³ç´°æ¤œç´¢ãƒšãƒ¼ã‚¸ã¸é·ç§»ã—ã¾ã™ã€‚
ã“ã“ã§ã¯ã€å„é …ç›®ã§æ¡ä»¶ã‚’çµã£ã¦è‡ªå·±PRã‚’æ¤œç´¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
```

<img src="https://user-images.githubusercontent.com/57927432/73045046-a9f7a700-3eaf-11ea-8ebd-12aeb0733c01.png" width="500px">

## å·¥å¤«ã—ã¦å®Ÿè£…ã—ãŸæ©Ÿèƒ½
#### ãƒ» è§£æ±ºæ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®åˆ‡ã‚Šæ›¿ãˆ
è§£æ±ºæ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã‚’`posts/solveds_controller.rb`å†…ã®updateã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§å®šç¾©ã—ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€è‡ªå·±PRè‡ªä½“ã®æ›´æ–°ï¼ˆ`posts_controller.rb`å†…ã®updateã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã¨åŒºåˆ¥ã—ã¦å‘¼ã³å‡ºã™ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã—ãŸã€‚

```controllers/posts/solveds_controller.rb
class Posts::SolvedsController < ApplicationController
  def update
    @post = Post.find(params[:id])
    @post.update_solved_true
    redirect_to post_path(@post.id)
  end
end
```

```views/posts/show.html.haml
- if current_user.id == @post.user_id
  = link_to "è§£æ±ºæ¸ˆã«ã™ã‚‹", posts_solved_path(@post), controller: :PostsSolveds, action: :update, method: :patch, class: :form__btn__solved
```

#### ãƒ» ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤ã®éåŒæœŸé€šä¿¡
éåŒæœŸé€šä¿¡ã§æŠ•ç¨¿ã•ã‚ŒãŸã‚³ãƒ¡ãƒ³ãƒˆãã‚Œãã‚Œã«å‹•çš„idã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€å„æŠ•ç¨¿ã«å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

```controllers/comments_controller.rb
class CommentsController < ApplicationController
  def destroy
    @comment = Comment.find(params[:id])
    @id_name = "#comment-#{@comment.id}"
    if @comment.destroy
    else
      flash.now[:alert] = 'ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚'
    end
  end
```

```views/shared/_comment.html.haml
.content{id: "comment-#{comment.id}"}
-# (çœç•¥)
```

```views/comments/destroy.js.haml
$('#{@id_name}').remove();
```

## DBè¨­è¨ˆå›³
<img src="https://user-images.githubusercontent.com/57927432/73047526-6f930780-3eb9-11ea-8173-c41bf928eafe.png" width="1200px">
### usersãƒ†ãƒ¼ãƒ–ãƒ«
|Column|Type|Options|
|------|----|-------|
|email|string|null: false, unique: true|
|password|string|null: false|
|name|string|null: false, unique: true|
#### Association
- has_many :posts
- has_many :comments
- has_many :favolites
- has_many :favorite_posts, through: :favorites, source: :post
- has_many :active_relationships, class_name: "Relationship", foreign_key: :following_id
- has_many :followings, through: :active_relationships, source: :follower
- has_many :passive_relationships, class_name: "Relationship", foreign_key: :follower_id
- has_many :followers, through: :passive_relationships, source: :following

### postsãƒ†ãƒ¼ãƒ–ãƒ«
|Column|Type|Options|
|------|----|-------|
|industry_id|integer|null: false|
|hopejob_id|integer|null: false|
|nowjob_id|integer|null: false|
|text|text|null: false|
|solved_status|boolean| { solved: true, unsolved: false }|
|user_id|reference|null: false, foreign_key: true|
#### Association
- belongs_to_active_hash :industry
- belongs_to_active_hash :hopejob
- belongs_to_active_hash :nowjob
- has_many :comments
- belongs_to :user
- has_many :favorites, foreign_key: 'Post_id', dependent: :destroy
- has_many :favorite_users, through: :favorites, source: :user


### favorites(user_posts)ãƒ†ãƒ¼ãƒ–ãƒ«
|Column|Type|Options|
|------|----|-------|
|user_id|reference|null: false, foreign_key: true|
|post_id|reference|null: false, foreign_key: true|
#### Association
- belongs_to :user
- belongs_to :post

### commentsãƒ†ãƒ¼ãƒ–ãƒ«
|Column|Type|Options|
|------|----|-------|
|text|text|null: false|
|user_id|integer|null: false, foreign_key: true|
|post_id|integer|null: false, foreign_key: true|
#### Association
- belongs_to :user
- belongs_to :post

### relations(following_followers)ãƒ†ãƒ¼ãƒ–ãƒ«
|Column|Type|Options|
|------|----|-------|
|following_id|integer||
|follower_id|integer||
#### Association
- belongs_to :following, class_name: "User"
- belongs_to :follower, class_name: "User"